仅有verbatim环境是不够用的，如果想添加一点语法高亮的话，就需要使用listings宏包。
```latex
%导言区使用 \usepackage{listings}
\begin{lstlisting}
反正就是代码块
\end{lstlisting}
```
直接使用的话效果可能甚至不如刚刚的verbatim环境，需要进一步设置才能达成我们想要的效果。
```latex
%导言区使用 \usepackage{listings}
\begin{lstlisting}[language=C]
反正就是代码块
\end{lstlisting}
```
可以使C语言的注释用斜体排出，关键字用粗体排出，字符串的空格也是可见的

```latex
\lstset{
	basicstyle=\rmfamily,
	keywordstyle=\bfseries,
	commentstyle=\rmfamily\itshape,
	stringstyle=\ttfamily，
	columns=flexible
}
```
listings宏包默认将字符设置成等宽显示，方便文字对齐，但是也让一些文字变得十分怪异。可以设置columns选项为flexible（默认为fixd）或使用flexiblecolumns选项来把字符设置成非等宽的。采用非等宽的可以让罗马字体也看得非常舒服。
```latex
\lstset{flexiblecolumns}
```
可以通过设置numbers选项为left或right在左右增加行号（默认为none）
使用numberstyle选项设置行号格式。

listings宏包对非ASCII表之外的字符（比如汉字）不是很友好，所以我们可以人工设置一个转义字符标志进行处理，这样才能得到正确的结果。吐槽一下，就连数学模式都不支持吗？
`\lstset{escapechar='}`

设置背景颜色
```latex
%导言区使用 \usepackage[dvipsnames]{xcolor}
\lstset{backgroundcolor=\color{}}
```

加个边框
```latex
\lstset{
	frame=single
	framesep=1em % 设置边框与代码的距离,边框动，代码不动。
}
```

（下面几个就是我日常使用的最终版本！）
```latex
%导言区使用 \usepackage{listings}
\lstset{
	basicstyle=\rmfamily,
	keywordstyle=\bfseries,
	commentstyle=\rmfamily\itshape,
	stringstyle=\ttfamily,
	columns=flexible,
	numbers=left,
	numberstyle=\footnotesize,
	numbersep=2em,
	frame=single,
	framesep=1em, % 设置行号的具体位置
	escapechar=!,
	backgroundcolor=\color{},
	%title=好好代码先生,
}
```

```latex
%在后面学习过程中找到的一个模板，来自清华beamer，比我自己写的这个好看多了。
\definecolor{deepblue}{rgb}{0,0,0.5}
\definecolor{deepred}{rgb}{0.6,0,0}
\definecolor{deepgreen}{rgb}{0,0.5,0}
\definecolor{halfgray}{gray}{0.55}

\lstset{
    basicstyle=\ttfamily\small,
    keywordstyle=\bfseries\color{deepblue},
    emphstyle=\ttfamily\color{deepred},    % Custom highlighting style
    stringstyle=\color{deepgreen},
    numbers=left,
    numberstyle=\small\color{halfgray},
    rulesepcolor=\color{red!20!green!20!blue!20},
    frame=shadowbox,
}
```

```latex
作者：一只方橙  
链接：https://zhuanlan.zhihu.com/p/496078810  

\usepackage{listings} 
\usepackage{xcolor} 
\lstset{ 
columns=fixed, 
numbers=left,
frame=none, % 不显示背景边框 
backgroundcolor=\color[RGB]{245,245,244}, % 设定背景颜色
keywordstyle=\color[RGB]{40,40,255}, % 设定关键字颜色
numberstyle=\footnotesize\color{darkgray}, % 设定行号格式
commentstyle=\it\color[RGB]{0,96,96}, % 设置代码注释的格式 
stringstyle=\rmfamily\slshape\color[RGB]{128,0,0}, % 设置字符串格式 
showstringspaces=false, % 不显示字符串中的空格 
language=c++, % 设置语言 
}
% 引入文件的写法 
% \lstinputlisting[language=c++]{main.cpp}
% 直接写法 
\begin{lstlisting} 
#include <iostream> 
int main() { std::cout << "Hello, World!" << std::endl; } 
\end{lstlisting}
```